color = data$killed,
symbol = I("square"),
size=I(8),
hoverinfo = "text") %>%
colorbar(title="hi") %>%
layout(title="hi",geo=g)
# df <- read.csv('https://raw.githubusercontent.com/plotly/datasets/master/2011_february_us_airport_traffic.csv')
#
# # geo styling
# g <- list(
#   scope = 'usa',
#   projection = list(type = 'albers usa'),
#   showland = TRUE,
#   landcolor = toRGB("gray95"),
#   subunitcolor = toRGB("gray85"),
#   countrycolor = toRGB("gray85"),
#   countrywidth = 0.5,
#   subunitwidth = 0.5
# )
#
# p <- plot_geo(df, lat = ~lat, lon = ~long) %>%
#   add_markers(
#     text = ~paste(airport, city, state, paste("Arrivals:", cnt), sep = "<br />"),
#     color = ~cnt, symbol = I("square"), size = I(8), hoverinfo = "text"
#   ) %>%
#   colorbar(title = "Incoming flights<br />February 2011") %>%
#   layout(
#     title = 'Most trafficked US airports<br />(Hover for airport)', geo = g
#   )
p
data.lng <- select(data,lng)
data.lat <- select(data,lat)
#
g <- list(scope='usa',projection = list(type = 'albers usa'),showland = TRUE, landcolor = toRGB("black"), subunitcolor = toRGB("gray85"), countrycolor = toRGB("gray85"), countrywidth = 0.5, subunitwidth = 0.5)
p <- plot_geo(data,lat=data.lat,lon=data.lng) %>%
add_markers(text=paste("killed=",data$killed,"injured=",data$injured,sep=""),
color = data$killed,
symbol = I("square"),
size=I(8),
hoverinfo = "text") %>%
colorbar(title="# of killed") %>%
layout(title="mass shooting in 2016",geo=g)
# df <- read.csv('https://raw.githubusercontent.com/plotly/datasets/master/2011_february_us_airport_traffic.csv')
#
# # geo styling
# g <- list(
#   scope = 'usa',
#   projection = list(type = 'albers usa'),
#   showland = TRUE,
#   landcolor = toRGB("gray95"),
#   subunitcolor = toRGB("gray85"),
#   countrycolor = toRGB("gray85"),
#   countrywidth = 0.5,
#   subunitwidth = 0.5
# )
#
# p <- plot_geo(df, lat = ~lat, lon = ~long) %>%
#   add_markers(
#     text = ~paste(airport, city, state, paste("Arrivals:", cnt), sep = "<br />"),
#     color = ~cnt, symbol = I("square"), size = I(8), hoverinfo = "text"
#   ) %>%
#   colorbar(title = "Incoming flights<br />February 2011") %>%
#   layout(
#     title = 'Most trafficked US airports<br />(Hover for airport)', geo = g
#   )
p
lat
lng
data.lng <- select(data,lng)
data.lat <- select(data,lat)
g <- list(scope='usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
p <- ploy_geo(data, locationmode = "USA-states",size = c(1, 250)) %>%
add_markers(
x=data.lng,y=data.lat,size= data$killed,color = data$killed, hoverinfo = "text",
text=paste("killed=",data$killed,"injured=",data$injured,sep="<br />")
) %>%
layout(title = "mass shooting in 2016", geo =g)
data.lng <- select(data,lng)
data.lat <- select(data,lat)
data$q <- with(data, cut(data$killed, quantile(data$killed)))
g <- list(scope='usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
test.data <- mutate(data, affected == killed + injured)
getwd()
# setwd("~/documents/uw/2nd/INFO 201/a6-mapping-shootings-wjbarng/")
data <- read.csv("data/shootings-2016.csv", stringsAsFactors = FALSE)
library(dplyr)
library(knitr)
library(plotly)
count <- nrow(data)
lives.lost <- summarise(data,sum = sum(killed))
most.affected.cities <- mutate(data, affected = killed + injured) %>% select(city, affected) %>% group_by(city) %>% summarise(sum = sum(affected)) %>% filter(sum == max(sum))
most.killed.date <- filter(data, killed == max(killed)) %>% select(date)
summary <- select(data, state, injured, killed) %>% mutate(total = killed + injured) %>% group_by(state) %>%  summarise(injured = sum(injured),killed = sum(killed), total = sum(total), occurances = n()) %>%arrange(desc(total))
kable(summary)
incident <- filter(data,killed == 0) %>% filter(injured == max(injured))
g <- list(scope='usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
test.data <- mutate(data, affected == killed + injured)
g <- list(scope='usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
test.data <- mutate(data, affected == killed + injured)
g <- list(scope='usa',
projection = list(type = 'albers usa'),
showland = TRUE,
landcolor = toRGB("gray95"),
subunitcolor = toRGB("gray85"),
countrycolor = toRGB("gray85"),
countrywidth = 0.5,
subunitwidth = 0.5)
test.data <- mutate(data, affected = killed + injured)
p <- plot_geo(test.data,locationmode = "USA-states",size = c(1, 250)) %>%
add_markers(
x= ~lng,y = ~lat,size = ~affected, color = ~affected, hoverinfo = "text",
text=paste("date: ",data$date,"killed = ",data$killed,"injured = ",data$injured,sep="<br />")
) %>%
layout(title = "mass shooting in 2016", geo =g)
# p <- plot_geo(data,lat = data.lat, lon = data.lng) %>%
#       add_markers(
#         text=paste("killed=",data$killed,"injured=",data$injured,sep="<br />"),
#         color = data$killed,
#         symbol = I("square"),
#         size=data$killed,
#         hoverinfo = "text") %>%
#   colorbar(title="# of killed") %>%
#   layout(title="mass shooting in 2016",geo=g
#   )
# df <- read.csv('https://raw.githubusercontent.com/plotly/datasets/master/2011_february_us_airport_traffic.csv')
#
# # geo styling
# g <- list(
#   scope = 'usa',
#   projection = list(type = 'albers usa'),
#   showland = TRUE,
#   landcolor = toRGB("gray95"),
#   subunitcolor = toRGB("gray85"),
#   countrycolor = toRGB("gray85"),
#   countrywidth = 0.5,
#   subunitwidth = 0.5
# )
#
# p <- plot_geo(df, lat = ~lat, lon = ~long) %>%
#   add_markers(
#     text = ~paste(airport, city, state, paste("Arrivals:", cnt), sep = "<br />"),
#     color = ~cnt, symbol = I("square"), size = I(8), hoverinfo = "text"
#   ) %>%
#   colorbar(title = "Incoming flights<br />February 2011") %>%
#   layout(
#     title = 'Most trafficked US airports<br />(Hover for airport)', geo = g
#   )
library(dplyr)
View(sumary)
View(sumaary)
View(summary)
View(most.affected.cities)
count <- nrow(data)
lives.lost <- summarise(data,sum = sum(killed))
most.affected.cities <- mutate(data, affected = killed + injured) %>% select(city, affected) %>% group_by(city) %>% summarise(sum = sum(affected)) %>% filter(sum == max(sum))
test <- paste(most.affected.cities)
most.killed.date <- filter(data, killed == max(killed)) %>% select(date)
t4est
test
count <- nrow(data)
lives.lost <- summarise(data,sum = sum(killed))
most.affected.cities <- mutate(data, affected = killed + injured) %>% select(city, affected) %>% group_by(city) %>% summarise(sum = sum(affected)) %>% filter(sum == max(sum)) %>% select(city)
write <- function(input) {
paste(input)
}
most <- lapply(most.affected.cities,write)
test <- paste(most.affected.cities)
most.killed.date <- filter(data, killed == max(killed)) %>% select(date)
test
most.affected.cities[1]
typeof(most.affected.cities)
most.affected.cities[1]
is.data.frame(most.affected.cities)
count <- nrow(data)
lives.lost <- summarise(data,sum = sum(killed))
most.affected.cities <- (mutate(data, affected = killed + injured) %>% select(city, affected) %>% group_by(city) %>% summarise(sum = sum(affected)) %>% filter(sum == max(sum)))$city
most.killed.date <- filter(data, killed == max(killed)) %>% select(date)
most.affected.cities[1]
getwd()
shiny::runApp('UW/2nd/INFO201/a8-building-apps-wjbarng')
install.packages("tidytext")
getwd()
setwd("~/desktop")
setwd("desktop")
setwd("Desktop")
setwd("~/Desktop")
shiny::runApp('UW/2nd/INFO201/wa-ethnic-detention-2004-2013')
getwd()
setwd("~/UW/2nd/INFO201/wa-ethnic-detention-2004-2013/")
getwd()
runApp()
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- as.numeric(my.data$`Total Num People in WA`)
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
# my.data$White <-as.numeric(my.data$White) / total.WA
# my.data$Black <-as.numeric(my.data$Black) / total.WA
# my.data$`Native American` <-as.numeric(my.data$`Native American`) / total.WA
# my.data$`Asian & Pacific Is.` <-as.numeric(my.data$`Asian & Pacific Is.`) / total.WA
# my.data$Hispanic <-as.numeric(my.data$Hispanic) / total.WA
# my.data$`Other/Unknown` <-as.numeric(my.data$`Other/Unknown`) / total.WA
# my.data$`Total` <- as.numeric(my.data$`Total`) / total.WA
my.data <- data.frame(t(my.data))
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
getwd()
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE)
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE)
runApp()
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE,stringsAsFactors = FALSE)
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE,stringsAsFactors = FALSE)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
View(WA.data)
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- as.numeric(my.data$`Total Num People in WA`)
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
# my.data$White <-as.numeric(my.data$White) / total.WA
# my.data$Black <-as.numeric(my.data$Black) / total.WA
# my.data$`Native American` <-as.numeric(my.data$`Native American`) / total.WA
# my.data$`Asian & Pacific Is.` <-as.numeric(my.data$`Asian & Pacific Is.`) / total.WA
# my.data$Hispanic <-as.numeric(my.data$Hispanic) / total.WA
# my.data$`Other/Unknown` <-as.numeric(my.data$`Other/Unknown`) / total.WA
# my.data$`Total` <- as.numeric(my.data$`Total`) / total.WA
my.data <- data.frame(t(my.data))
View(my.data)
my.data
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- as.numeric(my.data$`Total Num People in WA`)
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
# my.data$White <-as.numeric(my.data$White) / total.WA
# my.data$Black <-as.numeric(my.data$Black) / total.WA
# my.data$`Native American` <-as.numeric(my.data$`Native American`) / total.WA
# my.data$`Asian & Pacific Is.` <-as.numeric(my.data$`Asian & Pacific Is.`) / total.WA
# my.data$Hispanic <-as.numeric(my.data$Hispanic) / total.WA
# my.data$`Other/Unknown` <-as.numeric(my.data$`Other/Unknown`) / total.WA
# my.data$`Total` <- as.numeric(my.data$`Total`) / total.WA
my.data
my.data$White
typeof(my.data$White)
as.numeric(my.data$White)
my.data$White
as.numeric(as.character(my.data$White))
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE,stringsAsFactors = FALSE)
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE,stringsAsFactors = FALSE)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- as.numeric(my.data$`Total Num People in WA`)
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
# my.data$White <-as.numeric(my.data$White) / total.WA
# my.data$Black <-as.numeric(my.data$Black) / total.WA
# my.data$`Native American` <-as.numeric(my.data$`Native American`) / total.WA
# my.data$`Asian & Pacific Is.` <-as.numeric(my.data$`Asian & Pacific Is.`) / total.WA
# my.data$Hispanic <-as.numeric(my.data$Hispanic) / total.WA
# my.data$`Other/Unknown` <-as.numeric(my.data$`Other/Unknown`) / total.WA
# my.data$`Total` <- as.numeric(my.data$`Total`) / total.WA
my.data
View(my.data$White)
typeof(my.data$White)
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE,stringsAsFactors = FALSE)
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
runApp()
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv')
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv')
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- as.numeric(my.data$`Total Num People in WA`)
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
# my.data$White <-as.numeric(my.data$White) / total.WA
# my.data$Black <-as.numeric(my.data$Black) / total.WA
# my.data$`Native American` <-as.numeric(my.data$`Native American`) / total.WA
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE)
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- as.numeric(my.data$`Total Num People in WA`)
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
# my.data$White <-as.numeric(my.data$White) / total.WA
View(my.data)
as.numeric(my.data$White)
my.data$White / 50
typeof(my.data$White)
typeof(1)
my.data / 50.00
my.data$White / 50.00
as.numeric(as.factor(my.data$White))
as.factor(my.data$White)
as.factor(my.data$White) /50
is.integer(my.data$White)
typeof(my.data$White)
is.character(my.data$White)
is.factor(my.data$White)
as.numeric(as.character(my.data$White))
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE,stringsAsFactors=FALSE)
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE,stringsAsFactors=FALSE)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- as.numeric(my.data$`Total Num People in WA`)
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
# my.data$White <-as.numeric(my.data$White) / total.WA
View(my.data)
typeof(my.data$White)
as.numeric(my.data$White)
as.numeric(as.character(my.data$White))
test <- gsub(",","",my.data$White)
test
as.numeric(test)
as.numeric(test) / 50
my.data <- gsub(",","",my.data)
View(my.data)
my.data <- filter(WA.data, Year %in% '# 2013')
my.data <- gsub(",","",my.data)
my.data <- as.numeric(my.data)
my.data <- filter(WA.data, Year %in% '# 2013')
my.data <- gsub(",","",my.data)
my.data
View(my.data)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
WA.data <- gsub(",","",WA.data)
View(WA.data)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data <- gsub(",","",my.data$`Total Num People in WA`)
as.numeric(total.WA)
as.numeric(total.WA) / 50
View(WA.data)
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
df[,-1] <- as.numeric(gsub(",", "", as.matrix(df[,-1])))
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
WA.data[,-1] <- as.numeric(gsub(",", "", as.matrix(WA.data[,-1])))
View(WA.data)
runApp()
my.data <- mutate(WA.data,percentage = Total/`Total Num People in WA`) %>%
select(Year,percentage)
View(my.data)
runApp()
my.data <- mutate(WA.data,percentage = Total/`Total Num People in WA`*100) %>%
select(Year,percentage)
my.data <- mutate(WA.data,percentage = Total/`Total Num People in WA`*100) %>%
select(Year,percentage)
my.data <- mutate(WA.data,percentage = (Total/`Total Num People in WA`)*100) %>%
select(Year,percentage)
View(my.data)
runApp()
plot_ly(my.data, x= ~Year,y=~percentage,type='bar',name = 'percentage') %>%
layout(yaxis=list(title = 'percentage'))
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
total.WA
total.WA / 50
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
View(my.data)
my.data$White /50
my.data <- data.frame(t(my.data))
View(my.data)
row.names(my.data)
my.data <- mutate(my.data,percentage = t.my.data./total.WA)
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
my.data <- data.frame(t(my.data))
my.data <- mutate(my.data,percentage = t.my.data./total.WA*100)
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
my.data <- data.frame(t(my.data))
my.data <- mutate(my.data,percentage = t.my.data./total.WA*100)
plot_ly(my.data, x=row.names(my.data),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=row.names(WA.data[1:7]),y=~percentage,name="percentage by ethnicity",type='bar')
row.names(WA.data[1:7])
names(WA.data[1:7])
names(WA.data[2:7])
names(WA.data[2:8])
plot_ly(my.data, x=names(WA.data[2:8]),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=col.names(WA.data[2:8]),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=names(WA.data[2:8]),y=~percentage,name="percentage by ethnicity",type='bar')
runApp()
plot_ly(my.data, x=row.names(my.data),y=~percentage,name="percentage by ethnicity",type='bar')
runApp()
plot_ly(my.data, x=row.names(my.data),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x= ~Year,y=~percentage,type='bar',name = 'percentage')
my.data <- mutate(WA.data,percentage = (Total/`Total Num People in WA`)*100) %>%
select(Year,percentage)
plot_ly(my.data, x= ~Year,y=~percentage,type='bar',name = 'percentage') %>%
layout(yaxis=list(title = 'percentage'))
plot_ly(my.data, x=row.names(my.data),y=~percentage,name="percentage by ethnicity",type='bar')
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
my.data <- data.frame(t(my.data))
my.data <- mutate(my.data,percentage = t.my.data./total.WA*100)
plot_ly(my.data, x=row.names(my.data),y=~percentage,name="percentage by ethnicity",type='bar')
WA.data <- filter(all.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE)
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE)
all.data <- full_join(WA.detention.data,total.WA.pop)
WA.data <- filter(all.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
names(WA.data$Year)
WA.data
WA.data$Year
runApp()
WA.detention.data <- read.csv('./data/Ethnic_Distribution_of_Detention_Population_2004-2013.csv', check.names = FALSE,stringsAsFactors=FALSE)
# Data found from research - total WA population from 2004-2015
total.WA.pop <- read.csv('./data/added_column.csv', check.names = FALSE,stringsAsFactors=FALSE)
# Join data sets
all.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
# Remove unneeded columns
all.data$Total <- NULL
all.data$`Total Num People in WA` <- NULL
# Remove percent signs
all.data$White <- gsub("%", "", all.data$White)
all.data$Black <- gsub("%", "", all.data$Black)
all.data$`Native American` <- gsub("%", "", all.data$`Native American`)
all.data$Hispanic <- gsub("%", "", all.data$Hispanic)
all.data$`Asian & Pacific Is.` <- gsub("%", "", all.data$`Asian & Pacific Is.`)
all.data$`Other/Unknown` <- gsub("%", "", all.data$`Other/Unknown`)
# 2004 pie chart set up
data.2004 <- all.data %>% filter(Year == "2004%")
data.2004$Year <- NULL # unneeded column now
# Flip rows with columns
data.2004.flipped <- data.frame(t(data.2004))
# 2013 pie chart set up
data.2013 <- all.data %>% filter(Year == "2013%")
data.2013$Year <- NULL # unneeded column now
data.2013.flipped <- data.frame(t(data.2013))
#WA data
WA.data <- full_join(WA.detention.data, total.WA.pop, by = 'Year')
WA.data <-filter(WA.data,Year %in% c('# 2004','# 2005','# 2006','# 2007','# 2008','# 2009','# 2010','# 2011','# 2012','# 2013'))
WA.data[,-1] <- as.numeric(gsub(",", "", as.matrix(WA.data[,-1])))
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
my.data <- data.frame(t(my.data))
my.data <- mutate(my.data,percentage = t.my.data./total.WA*100)
colnames(WA.data)
colnames(WA.data[2:8])
plot_ly(my.data, x=colnames(WA.data[2:8),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=colnames(WA.data[2:8]),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=c(1, 2, 3, 4, 5, 6),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=c(1, 2, 3, 4, 5, 6,7),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=c(a,b,c,d,e,f,g,h),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=row.names(my.data),y=~percentage,name="percentage by ethnicity",type='bar')
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
View(my.data)
my.data / 100
my.data/total.WA
my.data/total.WA * 100
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
my.data <- my.data/total.WA
my.data <- data.frame(t(my.data))
View(my.data)
my.data <- filter(WA.data, Year %in% '# 2013')
total.WA <- my.data$`Total Num People in WA`
my.data <- select(my.data,White,Black,`Native American`,`Asian & Pacific Is.`,Hispanic,`Other/Unknown`,`Total`)
my.data <- my.data/total.WA *100
my.data <- data.frame(t(my.data))
View(my.data)
plot_ly(my.data, x=row.names(my.data),y=~percentage,name="percentage by ethnicity",type='bar')
plot_ly(my.data, x=row.names(my.data),y=~t.my.data.,name="percentage by ethnicity",type='bar')
runApp()
